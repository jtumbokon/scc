{
  "_schema_version": "2.0",
  "_last_updated": "2025-10-19T20:45:00Z",
  "_description": "Enhanced dependency graph with dynamic agent discovery metadata",

  "modules": {
    "pm-spec": {
      "id": "agent-001",
      "type": "agent",
      "version": "1.0.0",
      "path": ".claude/modules/agents/pm-spec.md",
      "hash": "abc123def456",
      "parents": ["CLAUDE.md"],
      "applies_rules": ["documentation-standards", "naming-conventions"],
      "uses_templates": ["spec-template"],
      "dependencies": ["mcp__archon-http__rag_search_knowledge_base", "mcp__archon-http__rag_search_code_examples"],

      "_comment": "ðŸ‘‡ AGENT-SPECIFIC METADATA FOR HOOKS ðŸ‘‡",
      "agent_metadata": {
        "triggered_by_status": "DRAFT",
        "updates_status_to": "READY_FOR_ARCH",
        "next_agent": "architect-review",
        "queue_field": "spec_path",
        "output_location": "docs/claude/working-notes/[slug].md",
        "tools": ["Read", "Grep", "Glob", "Edit", "Write", "mcp__archon-http__rag_search_knowledge_base", "mcp__archon-http__rag_search_code_examples"],
        "human_review_required": true,
        "description": "Product manager that creates specifications from requirements using research patterns"
      }
    },

    "architect-review": {
      "id": "agent-002",
      "type": "agent",
      "version": "1.0.0",
      "path": ".claude/modules/agents/architect-review.md",
      "hash": "def456ghi789",
      "parents": ["CLAUDE.md"],
      "applies_rules": ["security-rules", "documentation-standards", "naming-conventions"],
      "uses_templates": ["component-template", "api-template"],
      "dependencies": ["mcp__archon-http__rag_search_knowledge_base", "mcp__archon-http__rag_search_code_examples"],

      "agent_metadata": {
        "triggered_by_status": "READY_FOR_ARCH",
        "updates_status_to": "READY_FOR_BUILD",
        "next_agent": "implementer-tester",
        "queue_field": "adr_path",
        "output_location": "docs/claude/decisions/ADR-[slug].md",
        "tools": ["Read", "Grep", "Glob", "Edit", "Write", "mcp__archon-http__rag_search_knowledge_base", "mcp__archon-http__rag_search_code_examples"],
        "human_review_required": true,
        "description": "Architect that validates designs and creates Architecture Decision Records (ADRs)"
      }
    },

    "implementer-tester": {
      "id": "agent-003",
      "type": "agent",
      "version": "1.0.0",
      "path": ".claude/modules/agents/implementer-tester.md",
      "hash": "ghi789jkl012",
      "parents": ["CLAUDE.md"],
      "applies_rules": ["naming-conventions", "testing-standards", "security-rules", "code-style"],
      "uses_templates": ["component-template", "test-template", "api-template"],
      "dependencies": ["mcp__serena__find_symbol", "mcp__serena__search_for_pattern", "mcp__playwright__browser_navigate", "mcp__playwright__browser_screenshot"],

      "agent_metadata": {
        "triggered_by_status": "READY_FOR_BUILD",
        "updates_status_to": "DONE",
        "next_agent": null,
        "queue_field": "pr_url",
        "output_location": "src/ (various files), tests/ (test files)",
        "tools": ["Read", "Edit", "Write", "Bash", "Grep", "Glob", "mcp__serena__find_symbol", "mcp__serena__search_for_pattern", "mcp__playwright__browser_navigate", "mcp__playwright__browser_screenshot"],
        "human_review_required": true,
        "description": "Engineer that implements features with test-driven development and comprehensive testing"
      }
    },

    "_comment": "ðŸ‘‡ ADD NEW AGENTS HERE - HOOKS AUTO-DISCOVER ðŸ‘‡",

    "security-auditor": {
      "id": "agent-004",
      "type": "agent",
      "version": "1.0.0",
      "path": ".claude/modules/agents/security-auditor.md",
      "hash": "jkl012mno345",
      "parents": ["CLAUDE.md"],
      "applies_rules": ["security-rules"],
      "dependencies": ["mcp__archon-http__rag_search_knowledge_base"],

      "agent_metadata": {
        "triggered_by_status": "READY_FOR_SECURITY_AUDIT",
        "updates_status_to": "SECURITY_APPROVED",
        "next_agent": "implementer-tester",
        "queue_field": "security_audit_path",
        "output_location": "docs/claude/security/[slug]-audit.md",
        "tools": ["Read", "Grep", "Glob", "Edit", "Write", "mcp__archon-http__rag_search_knowledge_base"],
        "human_review_required": true,
        "description": "Security specialist that audits designs and implementations for vulnerabilities and compliance"
      }
    },

    "documentation-writer": {
      "id": "agent-005",
      "type": "agent",
      "version": "1.0.0",
      "path": ".claude/modules/agents/documentation-writer.md",
      "hash": "mno345pqr678",
      "parents": ["CLAUDE.md"],
      "applies_rules": ["documentation-standards", "naming-conventions"],
      "uses_templates": ["documentation-template"],
      "dependencies": [],

      "agent_metadata": {
        "triggered_by_status": "READY_FOR_DOCS",
        "updates_status_to": "DOCS_COMPLETE",
        "next_agent": null,
        "queue_field": "docs_path",
        "output_location": "docs/[slug]/",
        "tools": ["Read", "Grep", "Glob", "Edit", "Write"],
        "human_review_required": false,
        "description": "Technical writer that creates comprehensive documentation for completed features"
      }
    },

    "performance-analyst": {
      "id": "agent-006",
      "type": "agent",
      "version": "1.0.0",
      "path": ".claude/modules/agents/performance-analyst.md",
      "hash": "pqr678stu901",
      "parents": ["CLAUDE.md"],
      "applies_rules": ["documentation-standards"],
      "dependencies": ["mcp__chrome-devtools__performance_start_trace", "mcp__chrome_devtools__performance_stop_trace"],

      "agent_metadata": {
        "triggered_by_status": "READY_FOR_PERFORMANCE_ANALYSIS",
        "updates_status_to": "PERFORMANCE_APPROVED",
        "next_agent": "documentation-writer",
        "queue_field": "performance_report_path",
        "output_location": "docs/performance/[slug]-analysis.md",
        "tools": ["Read", "Grep", "Glob", "Edit", "Write", "mcp__chrome_devtools__performance_start_trace", "mcp__chrome_devtools__performance_stop_trace"],
        "human_review_required": true,
        "description": "Performance analyst that measures and analyzes application performance characteristics"
      }
    },

    "ux-researcher": {
      "id": "agent-007",
      "type": "agent",
      "version": "1.0.0",
      "path": ".claude/modules/agents/ux-researcher.md",
      "hash": "stu901vwx234",
      "parents": ["CLAUDE.md"],
      "applies_rules": ["documentation-standards"],
      "dependencies": ["mcp__playwright__browser_navigate", "mcp__playwright__browser_screenshot"],

      "agent_metadata": {
        "triggered_by_status": "READY_FOR_UX_RESEARCH",
        "updates_status_to": "UX_RESEARCH_COMPLETE",
        "next_agent": "architect-review",
        "queue_field": "ux_research_path",
        "output_location": "docs/ux/[slug]-research.md",
        "tools": ["Read", "Grep", "Glob", "Edit", "Write", "mcp__playwright__browser_navigate", "mcp__playwright__browser_screenshot"],
        "human_review_required": true,
        "description": "UX researcher that conducts user research and creates design recommendations"
      }
    },

    "code-reviewer": {
      "id": "agent-008",
      "type": "agent",
      "version": "1.0.0",
      "path": ".claude/modules/agents/code-reviewer.json",
      "hash": "vwx234yzm567",
      "parents": ["CLAUDE.md"],
      "applies_rules": ["naming-conventions", "testing-standards", "security-rules", "code-style"],
      "dependencies": ["mcp__semgrep__security_check", "mcp__semgrep__semgrep_scan"],

      "agent_metadata": {
        "triggered_by_status": "READY_FOR_CODE_REVIEW",
        "updates_status_to": "CODE_REVIEWED",
        "next_agent": "implementer-tester",
        "queue_field": "code_review_path",
        "output_location": "docs/reviews/[slug]-code-review.md",
        "tools": ["Read", "Grep", "Glob", "Edit", "Write", "mcp__semgrep__security_check", "mcp__semgrep__semgrep_scan"],
        "human_review_required": true,
        "description": "Code reviewer that performs security and quality analysis on implementations"
      }
    }
  },

  "agent_workflows": {
    "_comment": "Define different workflow paths using registered agents",

    "standard_feature": {
      "name": "Standard Feature Development",
      "description": "Basic feature development workflow",
      "steps": [
        {"agent": "pm-spec", "status_transition": "DRAFT â†’ READY_FOR_ARCH"},
        {"agent": "architect-review", "status_transition": "READY_FOR_ARCH â†’ READY_FOR_BUILD"},
        {"agent": "implementer-tester", "status_transition": "READY_FOR_BUILD â†’ DONE"}
      ]
    },

    "security_critical": {
      "name": "Security-Critical Feature",
      "description": "Enhanced workflow for security-sensitive features",
      "steps": [
        {"agent": "pm-spec", "status_transition": "DRAFT â†’ READY_FOR_ARCH"},
        {"agent": "architect-review", "status_transition": "READY_FOR_ARCH â†’ READY_FOR_SECURITY_AUDIT"},
        {"agent": "security-auditor", "status_transition": "READY_FOR_SECURITY_AUDIT â†’ SECURITY_APPROVED"},
        {"agent": "implementer-tester", "status_transition": "SECURITY_APPROVED â†’ DONE"}
      ]
    },

    "performance_critical": {
      "name": "Performance-Critical Feature",
      "description": "Workflow for performance-sensitive features",
      "steps": [
        {"agent": "pm-spec", "status_transition": "DRAFT â†’ READY_FOR_ARCH"},
        {"agent": "architect-review", "status_transition": "READY_FOR_ARCH â†’ READY_FOR_BUILD"},
        {"agent": "implementer-tester", "status_transition": "READY_FOR_BUILD â†’ READY_FOR_PERFORMANCE_ANALYSIS"},
        {"agent": "performance-analyst", "status_transition": "READY_FOR_PERFORMANCE_ANALYSIS â†’ PERFORMANCE_APPROVED"},
        {"agent": "documentation-writer", "status_transition": "PERFORMANCE_APPROVED â†’ DOCS_COMPLETE"}
      ]
    },

    "ux_critical": {
      "name": "UX-Critical Feature",
      "description": "Workflow for user experience intensive features",
      "steps": [
        {"agent": "ux-researcher", "status_transition": "DRAFT â†’ UX_RESEARCH_COMPLETE"},
        {"agent": "pm-spec", "status_transition": "UX_RESEARCH_COMPLETE â†’ READY_FOR_ARCH"},
        {"agent": "architect-review", "status_transition": "READY_FOR_ARCH â†’ READY_FOR_BUILD"},
        {"agent": "implementer-tester", "status_transition": "READY_FOR_BUILD â†’ DONE"}
      ]
    },

    "documentation_only": {
      "name": "Documentation Update",
      "description": "Workflow for documentation-only tasks",
      "steps": [
        {"agent": "documentation-writer", "status_transition": "READY_FOR_DOCS â†’ DOCS_COMPLETE"}
      ]
    },

    "code_review_workflow": {
      "name": "Code Review Process",
      "description": "Enhanced code review with security analysis",
      "steps": [
        {"agent": "code-reviewer", "status_transition": "READY_FOR_CODE_REVIEW â†’ CODE_REVIEWED"},
        {"agent": "implementer-tester", "status_transition": "CODE_REVIEWED â†’ DONE"}
      ]
    }
  },

  "status_mappings": {
    "_comment": "Comprehensive mapping of all status values to agents",

    "DRAFT": {
      "agent": "pm-spec",
      "next_status": "READY_FOR_ARCH",
      "description": "Initial state, needs specification"
    },
    "READY_FOR_ARCH": {
      "agent": "architect-review",
      "next_status": "READY_FOR_BUILD",
      "description": "Specification complete, needs architecture"
    },
    "READY_FOR_BUILD": {
      "agent": "implementer-tester",
      "next_status": "DONE",
      "description": "Architecture approved, ready for implementation"
    },
    "READY_FOR_SECURITY_AUDIT": {
      "agent": "security-auditor",
      "next_status": "SECURITY_APPROVED",
      "description": "Architecture complete, needs security review"
    },
    "READY_FOR_DOCS": {
      "agent": "documentation-writer",
      "next_status": "DOCS_COMPLETE",
      "description": "Implementation complete, needs documentation"
    },
    "READY_FOR_PERFORMANCE_ANALYSIS": {
      "agent": "performance-analyst",
      "next_status": "PERFORMANCE_APPROVED",
      "description": "Implementation complete, needs performance analysis"
    },
    "READY_FOR_UX_RESEARCH": {
      "agent": "ux-researcher",
      "next_status": "UX_RESEARCH_COMPLETE",
      "description": "Initial concept, needs user research"
    },
    "READY_FOR_CODE_REVIEW": {
      "agent": "code-reviewer",
      "next_status": "CODE_REVIEWED",
      "description": "Implementation complete, needs code review"
    },
    "SECURITY_APPROVED": {
      "agent": "implementer-tester",
      "next_status": "DONE",
      "description": "Security audit complete, ready for implementation"
    },
    "PERFORMANCE_APPROVED": {
      "agent": "documentation-writer",
      "next_status": "DOCS_COMPLETE",
      "description": "Performance analysis complete, needs documentation"
    },
    "UX_RESEARCH_COMPLETE": {
      "agent": "pm-spec",
      "next_status": "READY_FOR_ARCH",
      "description": "UX research complete, ready for specification"
    },
    "CODE_REVIEWED": {
      "agent": "implementer-tester",
      "next_status": "DONE",
      "description": "Code review complete, ready for final implementation"
    }
  },

  "registry_metadata": {
    "total_agents": 8,
    "total_workflows": 6,
    "last_agent_added": "code-reviewer",
    "last_workflow_added": "code_review_workflow",
    "supported_status_count": 12,
    "schema_version": "2.0"
  }
}